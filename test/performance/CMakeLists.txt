
add_executable(octree_perf octree.cpp)
target_include_directories(octree_perf PRIVATE ../../include)
target_include_directories(octree_perf PRIVATE ../)
target_link_libraries(octree_perf PRIVATE OpenMP::OpenMP_CXX)
install(TARGETS octree_perf RUNTIME DESTINATION ${CMAKE_INSTALL_SBINDIR}/performance)

add_executable(peers_perf peers.cpp)
target_include_directories(peers_perf PRIVATE ../../include)
target_include_directories(peers_perf PRIVATE ../)
target_link_libraries(peers_perf PRIVATE OpenMP::OpenMP_CXX)
install(TARGETS peers_perf RUNTIME DESTINATION ${CMAKE_INSTALL_SBINDIR}/performance)

add_executable(scan_perf scan.cpp)
target_include_directories(scan_perf PRIVATE ../../include)
target_include_directories(scan_perf PRIVATE ../)
target_link_libraries(scan_perf PRIVATE OpenMP::OpenMP_CXX)
install(TARGETS scan_perf RUNTIME DESTINATION ${CMAKE_INSTALL_SBINDIR}/performance)

add_executable(hilbert_perf hilbert.cpp)
target_include_directories(hilbert_perf PRIVATE ../../include)
target_include_directories(hilbert_perf PRIVATE ../)
target_link_libraries(hilbert_perf PRIVATE OpenMP::OpenMP_CXX)

add_executable(gravity_perf gravity.cpp)
target_include_directories(gravity_perf PRIVATE ../../include)
target_include_directories(gravity_perf PRIVATE ../)
target_link_libraries(gravity_perf PRIVATE OpenMP::OpenMP_CXX)
#target_compile_options(gravity_perf PRIVATE -Rpass=loop-vectorize -Rpass-analysis=loop-vectorize)

if(CMAKE_CUDA_COMPILER)
    add_executable(cudaNeighborsTest $<TARGET_OBJECTS:cuda_find_neighbors_obj> neighbor_driver.cu)
    target_include_directories(cudaNeighborsTest PRIVATE ../../include)
    target_include_directories(cudaNeighborsTest PRIVATE ../)
    target_link_libraries(cudaNeighborsTest PRIVATE ${CUDA_RUNTIME_LIBRARY} OpenMP::OpenMP_CXX)
    install(TARGETS cudaNeighborsTest RUNTIME DESTINATION ${CMAKE_INSTALL_SBINDIR}/performance)

    add_executable(octree_perf_gpu octree.cu)
    target_include_directories(octree_perf_gpu PRIVATE ../../include)
    target_include_directories(octree_perf_gpu PRIVATE ../)
    install(TARGETS octree_perf_gpu RUNTIME DESTINATION ${CMAKE_INSTALL_SBINDIR}/performance)

    add_executable(hilbert_perf_gpu hilbert.cu)
    target_include_directories(hilbert_perf_gpu PRIVATE ../../include)
    target_include_directories(hilbert_perf_gpu PRIVATE ../)
    install(TARGETS hilbert_perf_gpu RUNTIME DESTINATION ${CMAKE_INSTALL_SBINDIR}/performance)
endif()
